<!DOCTYPE html>
<!DOCTYPE html>

<html lang="zh-CN">
	<head>
		<meta charset="utf-8" />
	    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
	    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
		<title>速度综合分析</title>
		<link rel="stylesheet" href="{{url_for('static',filename='css/bootstrap.min.css')}}"/>
		<link rel="stylesheet" href="{{url_for('static',filename='css/app.css')}}" />
		<script src="{{ url_for('static',filename='js/echarts-bmap.js')}}"></script>
	</head>

	<body class="bg02">
		<header class="header">
			<h3>速度综合分析</h3>
		</header>

		<div class="wrapper">
			<div class="container-fluid">
				<div class="row fill-h">
					<div class="col-lg-5 fill-h" style="width:50%;">
						<div class="xpanel-wrapper xpanel-wrapper-1" style="height:60%;">
							<div class="xpanel">
								<div class="fill-h" id="speed_graph" style="background-color: #cdffe6;"></div>
							</div>
						</div>
					</div>
					<div class="col-lg-5 fill-h" style="width:50%;">
						<div class="xpanel-wrapper xpanel-wrapper-1" style="height:100%">
							<div class="xpanel">
								<div class="fill-h" id="speed_scatter" style="background-color: #cdffe6;"></div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<script type="text/javascript" src="{{ url_for('static', filename='js/jquery-3.3.1.min.js') }}"></script>
		<!--<script type="text/javascript" src="http://api.map.baidu.com/api?v=3.0&ak=c6pIzPd8WxIKNAb3HxWSpboGhsS1ErDR"></script>-->
		<script type="text/javascript" src="{{ url_for('static', filename='js/echarts-3.8.5.min.js') }}"></script>
		<script type="text/javascript" src="{{ url_for('static', filename='js/echarts-bmap.js')}}"></script>
		<script type="text/javascript">
		server_url = "http://127.0.0.1:2346";
		latitude = 30.49894;
		longitude = 104.08133;
		time_unit=600;
		</script>
		<script type="text/javascript" src="{{ url_for('static', filename='js/three_speed_within.js')}}"></script>
		<script type="text/javascript" >
		$.ajax({
        type: 'GET',
            url: server_url+"/get_scatter_speed/",
            data:{
            },
            dataType: 'json',
            contentType: "application/json",
            success: function(our_data,i) {
				var dom = document.getElementById("speed_scatter");
				var myChart = echarts.init(dom);
var xData = [];
var yData = [];
function generateData(theta, min, max) {
    var data = [];
    var counter = 0;
    for (var i = 0; i < 200; i++) {
        for (var j = 0; j < 90; j++) {

			console.log(counter);
            data.push([i, j, our_data[counter][2]]);
            counter++;
            // data.push([i, j, normalDist(theta, x) * normalDist(theta, y)]);
        }
        xData.push(parseInt(i/200*24));
    }
    for (var j = 0; j < 90; j++) {
        yData.push(j);
    }
    return data;
}
var data = generateData(2, -5, 5);

option = {
       title: {
            text: '速度随时间变化热力图',
            x:'center'
        },
    tooltip: {},
    xAxis: {
        type: 'category',
        data: xData
    },
    yAxis: {
        type: 'category',
        data: yData
    },
	backgroundColor:'#001a61',
    visualMap: {
        min: 0,
        max: 1,
        calculable: true,
        realtime: false,
        inRange: {
            color: ['#313695', '#4575b4', '#74add1', '#abd9e9', '#e0f3f8', '#ffffbf', '#fee090', '#fdae61', '#f46d43', '#d73027', '#a50026']
        }
    },
    series: [{
        name: 'Gaussian',
        type: 'heatmap',
        data: data,
        itemStyle: {
            emphasis: {
                borderColor: '#333',
                borderWidth: 1
            }
        },
        progressive: 1000,
        animation: false
    }]
};

                if (option && typeof option === "object") {
                    myChart.setOption(option, true);
                }
			dom.style.backgroundColor = "#d8ffdc";
            },
            error: function(xhr, type) {
                alert("error")
            },
        });
		</script>
	</body>
</html>